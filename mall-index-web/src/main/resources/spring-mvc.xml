<?xml version="1.0" encoding="UTF-8"?><beans xmlns="http://www.springframework.org/schema/beans"       xmlns:context="http://www.springframework.org/schema/context"       xmlns:mvc="http://www.springframework.org/schema/mvc"       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xmlns:aop="http://www.springframework.org/schema/aop"       xsi:schemaLocation="        http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans.xsd        http://www.springframework.org/schema/context        http://www.springframework.org/schema/context/spring-context.xsd        http://www.springframework.org/schema/mvc        http://www.springframework.org/schema/mvc/spring-mvc.xsd        http://www.springframework.org/schema/aop        http://www.springframework.org/schema/aop/spring-aop-4.0.xsd">    <context:component-scan base-package="com.malaysia" /><!--        <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>    </context:component-scan>-->    <bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver">        <property name="cookieMaxAge" value="604800"/>        <property name="defaultLocale" value="zh_CN"/>        <property name="cookieName" value="Language"></property>    </bean>    <!-- Freemarker配置 -->    <bean id="freemarkerConfig"          class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">        <property name="templateLoaderPath" value="/WEB-INF/ftl/" />        <property name="freemarkerSettings">            <props>                <prop key="template_update_delay">0</prop>                <prop key="default_encoding">UTF-8</prop>                <prop key="number_format">0.##########</prop>                <prop key="datetime_format">yyyy-MM-dd HH:mm:ss</prop>                <prop key="classic_compatible">true</prop>                <prop key="template_exception_handler">ignore</prop>                <prop key="auto_import">/spring.ftl as spring</prop>            </props>        </property>    </bean>    <!--        可以不需要Controller处理request的情况，转向到设置的View    -->    <!-- 设置视图解析器-->    <bean id="viewResolver" class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">        <property name="suffix" value=".ftl"></property>        <property name="contentType" value="text/html;charset=UTF-8" />        <!-- 将Spring的FreeMarkerView改成我们扩展的View -->        <property name="viewClass" value="com.malaysia.core.web.FreemarkerViewUtil" />        <property name="exposeRequestAttributes" value="true" />        <property name="exposeSessionAttributes" value="true" />        <property name="exposeSpringMacroHelpers" value="true" />        <property name="requestContextAttribute" value="request"/>    </bean>    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">        <property name="basenames">            <!-- 定义消息资源文件的相对路径 -->            <list>                <value>messages/message</value>            </list>        </property>    </bean>    <!--      完成RequestMappingHandlerMapping和RequestMappingHandlerAdapter注册      并设置message-converters  -->    <mvc:annotation-driven>        <mvc:message-converters>            <ref bean="stringHttpMessageConverter"/>            <ref bean="mappingJackson2HttpMessageConverter"/>        </mvc:message-converters>    </mvc:annotation-driven>    <bean id="stringHttpMessageConverter"          class="org.springframework.http.converter.StringHttpMessageConverter">        <constructor-arg value="UTF-8" index="0"/>        <property name="supportedMediaTypes">            <list>                <value>text/plain;charset=UTF-8</value>                <value>text/plain;charset=UTF-8</value>                <value>application/json;charset=UTF-8</value>            </list>        </property>    </bean>    <bean id="mappingJackson2HttpMessageConverter"          class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">        <!--是否格式化输出-->        <property name="prettyPrint" value="true"/>        <property name="supportedMediaTypes">            <list>                <value>text/plain;charset=UTF-8</value>                <value>application/json;charset=UTF-8</value>                <value>application/x-www-form-urlencoded;charset=UTF-8</value>            </list>        </property>        <property name="objectMapper">            <bean class="com.fasterxml.jackson.databind.ObjectMapper">                <property name="dateFormat">                    <bean class="java.text.SimpleDateFormat">                        <constructor-arg value="yyyy-MM-dd HH:mm:ss"/>                    </bean>                </property>            </bean>        </property>    </bean>    <!--        使用<mvc:resources/>元素把静态资源映射到ResourceHttpRequestHandler进行处理，        location指定静态资源的位置    -->    <mvc:resources location="/js/" mapping="/js/**"/>    <mvc:resources location="/css/" mapping="/css/**"/>    <mvc:resources location="/images/" mapping="/images/**"/>    <mvc:resources location="/views" mapping="/views/**" />    <mvc:interceptors>        <mvc:interceptor>            <!-- 这个可以跨包访问到 ; 这里表示拦截所有的，但我们那些页面需要用到静态化就配置拦截那些访问路径 -->            <mvc:mapping path="/**/"/>            <!-- 拦截器类指向地址 -->            <bean class="com.malaysia.core.Interceptor.HtmlInterceptor"></bean>        </mvc:interceptor>    </mvc:interceptors>    <!-- 文件上传 -->    <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">        <property name="defaultEncoding" value="UTF-8"/>        <property name="maxUploadSize" value="5000000"/>    </bean></beans>